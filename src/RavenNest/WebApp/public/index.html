<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css?family=Titillium+Web&display=swap" rel="stylesheet">

  <script src="https://kit.fontawesome.com/3f217f080c.js" crossorigin="anonymous"></script>
  
  <!-- <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.9.0/css/all.css"
    integrity="sha384-vlOMx0hKjUCl4WzuhIhSNZSm2yQCaf0mOU1hEDK/iztH3gU4v5NMmJln9273A6Jz" crossorigin="anonymous"> -->
  <link rel="icon" href="<%= BASE_URL %>favicon.ico">
  <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">



  <link href="https://fonts.googleapis.com/css?family=Heebo:300,400,500,700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Nunito:300,400,600,700,900&display=swap" rel="stylesheet">

  <!--<script src="assets/TemplateData/UnityProgress.js"></script>
  <script src="assets/Build/UnityLoader.js"></script>-->

  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/default.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js"></script>
  <script src="/assets/documentation.data.js"></script>
  <script src="/session-state.js"></script>

  <!-- <script src="https://localhost:5001/session-state.js"></script> -->

  <script type="text/javascript">
    // HTTP->HTTPS redirection not working properly on this host along with asp.net core.. jesus
    // go go js!

    if (window.location.protocol.indexOf('https') == -1 && window.location.href.indexOf("ravenfall.stream") >= 0) {
      window.location.href = 'https://www.ravenfall.stream' + window.location.pathname;
    } else {
      if (SessionState.authenticated === false) {
        
        const port = window.location.port;
        var DEBUG = false;
        // var DEBUG = window.location.href.indexOf("localhost") >= 0         
        //  || window.location.href.indexOf("192.168.") >= 0
        //  || (port != null && port && parseInt(port) >= 500);

        // ugly as f. the session-state is being cached on cloudflare, maybe just use an api call to get the state instead
        // but then it needs to be awaited before the rest of the app starts.
        const script = document.createElement('script');
        script.src = (DEBUG ? 'https://localhost:5001' : '') + '/session-state.js?cache=' + Math.random() * 999999 + 900900;
        script.type = 'text/javascript';
        document.head.appendChild(script);
        const updateLoginState = () => {
          setTimeout(() => {
            if (typeof window["AppClass"] === 'undefined') {
              updateLoginState();
            } else {
              window["AppClass"].$forceUpdate();
            }
          }, 100);
        };
        updateLoginState();
      }
    }
  </script>
  <title>Ravenfall</title>
</head>

<body>
  <noscript>
    <strong>Y u no javascript?</strong>
  </noscript>
  <div id="app"></div>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-149866854-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
      dataLayer.push(arguments);
    }
    gtag('js', new Date());

    gtag('config', 'UA-149866854-1');
  </script>


</body>

</html>